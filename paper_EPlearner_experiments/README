# EP-Learner Experiments and Figures

This directory contains all code, scripts, and outputs needed to reproduce
the experiments and figures in the EP-learner paper:

  “Combining T-learning and DR-learning: a framework for oracle-efficient
   estimation of causal contrasts”

  https://arxiv.org/abs/2402.01972

The code in this folder is not a standalone package. It is contained within
the `hte3` R package repository and implements all experiments using the
public `hte3` package API.

Parent package repository:
https://github.com/Larsvanderlaan/hte3


## Purpose

The goal of this directory is to provide a fully reproducible experiment
pipeline for the EP-learner paper, including:

- Simulation studies
- Empirical comparisons
- Figure generation
- Aggregation of experiment outputs used in the manuscript

All experimental results reported in the paper can be regenerated using the
contents of this directory.


## Directory Structure

- BatchScripts/
  Batch and driver scripts for running experiments (e.g., grid runs,
  repeated simulations). These scripts were written for a custom SLURM-based
  cluster and may require modification to run on a different cluster or
  job scheduling system.

- code_for_experiments_and_figures/
  Core experiment code for data generation, estimator fitting, evaluation,
  and result saving.

- code_for_examples_and_figures_from_text/
  Code corresponding directly to examples and illustrative figures and
  tables from Section 3 of the paper (including the CATE and relative risk
  examples).

- experiment_results/
  Saved outputs from completed experiment runs, used for plotting and tables.

- EPlearner.Rproj
  RStudio project file for convenience.

Each subfolder contains its own README with more detailed instructions.


## Dependencies

All experiments rely on the `hte3` R package, which must be installed from
source:

    devtools::install_github("Larsvanderlaan/hte3")

Additional package dependencies are documented in the `hte3` package and are
handled automatically upon installation.


## Reproducing the Paper Results

A typical workflow is:

1. Open EPlearner.Rproj in RStudio.
2. Install and load the `hte3` package.
3. Run the appropriate scripts in BatchScripts/ or
   code_for_experiments_and_figures/ to generate raw results.
4. Use the figure scripts to regenerate plots from experiment_results/.

The BatchScripts/ directory assumes access to a SLURM-based cluster. The same
experiments can be run locally (e.g., on a MacBook Pro) by executing the
corresponding scripts directly without parallelization, though runtimes may
be substantially longer.

Exact instructions for each experiment and figure are documented in the
corresponding subfolder READMEs.
